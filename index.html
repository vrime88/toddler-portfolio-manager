<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Investment Tracker üê∑</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        @keyframes bounce {
            0%, 100% {
                transform: translateY(-25%);
                animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
            }
            50% {
                transform: translateY(0);
                animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
            }
        }
        
        .animate-bounce {
            animation: bounce 2s infinite;
        }
        
        .coin {
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            background: linear-gradient(135deg, #fcd34d 0%, #fbbf24 50%, #f59e0b 100%);
            border: 2px solid #d97706;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            font-weight: bold;
            font-size: 0.75rem;
            color: #92400e;
        }
        
        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 50;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        
        .modal.active {
            display: flex;
        }
        
        .hover-scale:hover {
            transform: scale(1.05);
        }
        
        .transition-all {
            transition: all 0.3s ease;
        }
    </style>
</head>
<body>
    <div id="root">
        <div class="min-h-screen bg-gradient-to-br from-pink-200 via-purple-200 to-blue-200 flex items-center justify-center">
            <div class="text-center">
                <div class="text-6xl mb-4 animate-bounce">üê∑</div>
                <div class="flex justify-center gap-2 mb-4">
                    <div class="coin animate-bounce" style="animation-delay: 0s;">CHF</div>
                    <div class="coin animate-bounce" style="animation-delay: 0.3s;">CHF</div>
                    <div class="coin animate-bounce" style="animation-delay: 0.6s;">CHF</div>
                </div>
                <p class="text-purple-700 text-xl font-bold">Loading your money...</p>
            </div>
        </div>
    </div>

    <script>
        // Storage functions
        const storage = {
            get: (key) => {
                try {
                    const value = localStorage.getItem(key);
                    return value;
                } catch (e) {
                    console.error('Error reading from storage:', e);
                    return null;
                }
            },
            set: (key, value) => {
                try {
                    localStorage.setItem(key, value);
                    return true;
                } catch (e) {
                    console.error('Error writing to storage:', e);
                    alert('Failed to save data. Please check your browser settings.');
                    return false;
                }
            }
        };

        // App state
        let state = {
            piggyBank: 0,
            transactions: [],
            investments: [],
            activeTab: 'overview',
            editingInvestment: null
        };

        // Load data
        function loadData() {
            const pb = storage.get('piggybank');
            const tx = storage.get('transactions');
            const inv = storage.get('investments');
            
            state.piggyBank = pb ? parseFloat(pb) : 0;
            state.transactions = tx ? JSON.parse(tx) : [];
            state.investments = inv ? JSON.parse(inv) : [];
        }

        // Save data
        function saveData() {
            storage.set('piggybank', state.piggyBank.toString());
            storage.set('transactions', JSON.stringify(state.transactions));
            storage.set('investments', JSON.stringify(state.investments));
        }

        // Calculate total value
        function calculateTotalValue() {
            const activeInvestmentsValue = state.investments
                .filter(inv => inv.status === 'active')
                .reduce((sum, inv) => {
                    const latestValue = inv.valueHistory[inv.valueHistory.length - 1].value;
                    return sum + latestValue;
                }, 0);
            return state.piggyBank + activeInvestmentsValue;
        }

        // Calculate ROI
        function calculateROI(investment) {
            const currentValue = investment.valueHistory[investment.valueHistory.length - 1].value;
            const roi = ((currentValue - investment.amountInvested) / investment.amountInvested) * 100;
            return roi;
        }

        // Add transaction
        function addTransaction(e) {
            e.preventDefault();
            const form = e.target;
            const amount = parseFloat(form.amount.value);
            const type = form.type.value;
            const description = form.description.value;
            const date = form.date.value;

            if (isNaN(amount) || amount <= 0) {
                alert('Please enter a valid amount');
                return;
            }

            if (type === 'withdrawal' && amount > state.piggyBank) {
                alert('Not enough money in piggy bank!');
                return;
            }

            const newTransaction = {
                id: Date.now().toString(),
                date: date,
                type: type,
                amount: amount,
                description: description
            };

            if (type === 'deposit') {
                state.piggyBank += amount;
            } else if (type === 'withdrawal') {
                state.piggyBank -= amount;
            }

            state.transactions.push(newTransaction);
            state.transactions.sort((a, b) => new Date(b.date) - new Date(a.date));

            saveData();
            closeModal('transactionModal');
            render();
        }

        // Create investment
        function createInvestment(e) {
            e.preventDefault();
            const form = e.target;
            const amount = parseFloat(form.amount.value);
            const name = form.name.value;
            const date = form.date.value;

            if (isNaN(amount) || amount <= 0) {
                alert('Please enter a valid amount');
                return;
            }

            if (amount > state.piggyBank) {
                alert('Not enough money in piggy bank!');
                return;
            }

            const newInvestment = {
                id: Date.now().toString(),
                name: name,
                amountInvested: amount,
                dateStarted: date,
                status: 'active',
                valueHistory: [{ date: date, value: amount }]
            };

            const investmentTransaction = {
                id: (Date.now() + 1).toString(),
                date: date,
                type: 'investment',
                amount: amount,
                description: `Investment: ${name}`,
                investmentId: newInvestment.id
            };

            state.piggyBank -= amount;
            state.investments.push(newInvestment);
            state.transactions.push(investmentTransaction);
            state.transactions.sort((a, b) => new Date(b.date) - new Date(a.date));

            saveData();
            closeModal('investmentModal');
            render();
        }

        // Update investment value
        function updateInvestmentValue(investmentId, newValue, newDate) {
            const value = parseFloat(newValue);
            if (isNaN(value) || value <= 0) {
                alert('Please enter a valid value');
                return;
            }

            state.investments = state.investments.map(inv => {
                if (inv.id === investmentId) {
                    inv.valueHistory.push({ date: newDate, value: value });
                    inv.valueHistory.sort((a, b) => new Date(a.date) - new Date(b.date));
                }
                return inv;
            });

            state.editingInvestment = null;
            saveData();
            render();
        }

        // Close investment
        function closeInvestment(investmentId) {
            const investment = state.investments.find(inv => inv.id === investmentId);
            if (!investment) return;

            const finalValue = investment.valueHistory[investment.valueHistory.length - 1].value;
            
            if (!confirm(`Close "${investment.name}" and get CHF ${finalValue.toFixed(2)} back? üéâ`)) {
                return;
            }

            const returnTransaction = {
                id: Date.now().toString(),
                date: new Date().toISOString().split('T')[0],
                type: 'return',
                amount: finalValue,
                description: `Investment Return: ${investment.name}`,
                investmentId: investment.id
            };

            state.piggyBank += finalValue;
            state.investments = state.investments.map(inv => 
                inv.id === investmentId 
                    ? { ...inv, status: 'closed', dateClosed: new Date().toISOString().split('T')[0], finalValue }
                    : inv
            );
            state.transactions.push(returnTransaction);
            state.transactions.sort((a, b) => new Date(b.date) - new Date(a.date));

            saveData();
            render();
        }

        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Change tab
        function changeTab(tab) {
            state.activeTab = tab;
            render();
        }

        // Render functions
        function renderTransactionIcon(type) {
            const icons = {
                deposit: 'üíµ',
                withdrawal: 'üè™',
                investment: 'üå±',
                return: 'üéâ'
            };
            const colors = {
                deposit: 'bg-green-100',
                withdrawal: 'bg-red-100',
                investment: 'bg-blue-100',
                return: 'bg-purple-100'
            };
            return `<div class="w-10 h-10 ${colors[type]} rounded-full flex items-center justify-center text-2xl">${icons[type]}</div>`;
        }

        function renderOverviewTab() {
            const recentTransactions = state.transactions.slice(0, 5);
            const activeInvestments = state.investments.filter(inv => inv.status === 'active');

            return `
                <div class="space-y-6">
                    <div class="flex gap-4">
                        <button
                            onclick="openModal('transactionModal')"
                            class="flex items-center gap-2 bg-gradient-to-r from-pink-500 to-pink-600 text-white px-6 py-3 rounded-2xl hover:from-pink-600 hover:to-pink-700 shadow-lg font-bold text-lg hover-scale transition-all"
                        >
                            <span>‚ûï</span> üí∞ Add Money
                        </button>
                        <button
                            onclick="openModal('investmentModal')"
                            class="flex items-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-3 rounded-2xl hover:from-blue-600 hover:to-blue-700 shadow-lg font-bold text-lg hover-scale transition-all"
                        >
                            <span>üìà</span> üå± New Investment
                        </button>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Recent Transactions -->
                        <div class="bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl p-5 border-3 border-yellow-200 shadow-lg">
                            <h3 class="font-bold text-gray-800 mb-4 text-xl flex items-center gap-2">
                                üìÖ üìù Recent Activity
                            </h3>
                            <div class="space-y-3">
                                ${recentTransactions.length > 0 ? recentTransactions.map(tx => `
                                    <div class="flex items-center justify-between bg-white p-4 rounded-xl shadow-md border-2 border-yellow-100">
                                        <div class="flex items-center gap-3">
                                            ${renderTransactionIcon(tx.type)}
                                            <div>
                                                <p class="text-sm font-bold text-gray-800">${tx.description}</p>
                                                <p class="text-xs text-gray-500">${tx.date}</p>
                                            </div>
                                        </div>
                                        <span class="font-bold text-lg ${tx.type === 'deposit' || tx.type === 'return' ? 'text-green-600' : 'text-red-600'}">
                                            ${tx.type === 'deposit' || tx.type === 'return' ? '+' : '-'}CHF ${tx.amount.toFixed(2)}
                                        </span>
                                    </div>
                                `).join('') : `
                                    <div class="text-center py-8">
                                        <div class="text-6xl mb-2">üê∑</div>
                                        <p class="text-gray-400 text-sm">No transactions yet! Start by adding money üí∞</p>
                                    </div>
                                `}
                            </div>
                        </div>

                        <!-- Active Investments -->
                        <div class="bg-gradient-to-br from-green-50 to-blue-50 rounded-2xl p-5 border-3 border-green-200 shadow-lg">
                            <h3 class="font-bold text-gray-800 mb-4 text-xl flex items-center gap-2">
                                üìà üå± My Investments
                            </h3>
                            <div class="space-y-3">
                                ${activeInvestments.length > 0 ? activeInvestments.map(inv => {
                                    const roi = calculateROI(inv);
                                    const currentValue = inv.valueHistory[inv.valueHistory.length - 1].value;
                                    return `
                                        <div class="bg-white p-4 rounded-xl shadow-md border-2 border-green-100">
                                            <div class="flex items-center justify-between mb-2">
                                                <p class="font-bold text-gray-800 flex items-center gap-2">
                                                    <span class="text-2xl">üìà</span>
                                                    ${inv.name}
                                                </p>
                                                <span class="text-sm font-bold px-3 py-1 rounded-full ${roi >= 0 ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}">
                                                    ${roi >= 0 ? 'üòä +' : 'üò¢ '}${roi.toFixed(1)}%
                                                </span>
                                            </div>
                                            <div class="flex items-center justify-between text-sm text-gray-600 font-medium">
                                                <span>Started: CHF ${inv.amountInvested.toFixed(2)}</span>
                                                <span class="font-bold text-blue-600">Now: CHF ${currentValue.toFixed(2)}</span>
                                            </div>
                                        </div>
                                    `;
                                }).join('') : `
                                    <div class="text-center py-8">
                                        <div class="text-6xl mb-2">üìà</div>
                                        <p class="text-gray-400 text-sm">No investments yet! Start growing your money üå±</p>
                                    </div>
                                `}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderTransactionsTab() {
            return `
                <div>
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-purple-600 flex items-center gap-2">
                            üí∏ All My Transactions
                        </h2>
                        <button
                            onclick="openModal('transactionModal')"
                            class="flex items-center gap-2 bg-gradient-to-r from-pink-500 to-pink-600 text-white px-6 py-3 rounded-2xl hover:from-pink-600 hover:to-pink-700 shadow-lg font-bold hover-scale transition-all"
                        >
                            <span>‚ûï</span> Add Money
                        </button>
                    </div>

                    <div class="space-y-3">
                        ${state.transactions.length > 0 ? state.transactions.map(tx => `
                            <div class="flex items-center justify-between bg-gradient-to-r from-white to-purple-50 p-5 rounded-2xl shadow-lg border-2 border-purple-100">
                                <div class="flex items-center gap-4">
                                    ${renderTransactionIcon(tx.type).replace('w-10 h-10', 'w-14 h-14')}
                                    <div>
                                        <p class="font-bold text-lg text-gray-800">${tx.description}</p>
                                        <p class="text-sm text-gray-500 flex items-center gap-1 font-medium">
                                            üìÖ ${tx.date}
                                        </p>
                                    </div>
                                </div>
                                <span class="text-2xl font-bold ${tx.type === 'deposit' || tx.type === 'return' ? 'text-green-600' : 'text-red-600'}">
                                    ${tx.type === 'deposit' || tx.type === 'return' ? '+' : '-'}CHF ${tx.amount.toFixed(2)}
                                </span>
                            </div>
                        `).join('') : `
                            <div class="text-center py-12 bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl border-2 border-dashed border-purple-200">
                                <div class="text-8xl mb-4">üê∑</div>
                                <p class="text-purple-400 text-lg font-bold">No transactions yet!</p>
                                <p class="text-purple-300">Start by adding money to your piggy bank! üí∞</p>
                            </div>
                        `}
                    </div>
                </div>
            `;
        }

        function renderInvestmentsTab() {
            return `
                <div>
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-blue-600 flex items-center gap-2">
                            üå± My Investments
                        </h2>
                        <button
                            onclick="openModal('investmentModal')"
                            class="flex items-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-3 rounded-2xl hover:from-blue-600 hover:to-blue-700 shadow-lg font-bold hover-scale transition-all"
                        >
                            <span>‚ûï</span> New Investment
                        </button>
                    </div>

                    <div class="space-y-4">
                        ${state.investments.length > 0 ? state.investments.map(inv => {
                            const roi = calculateROI(inv);
                            const currentValue = inv.valueHistory[inv.valueHistory.length - 1].value;
                            const gain = currentValue - inv.amountInvested;
                            const isEditing = state.editingInvestment === inv.id;

                            return `
                                <div class="bg-gradient-to-br from-white to-blue-50 rounded-2xl p-6 shadow-lg border-3 border-blue-200">
                                    <div class="flex items-start justify-between mb-4">
                                        <div class="flex items-center gap-3">
                                            <span class="text-4xl">üìà</span>
                                            <div>
                                                <h3 class="text-xl font-bold text-gray-800">${inv.name}</h3>
                                                <p class="text-sm text-gray-500 font-medium">
                                                    Started: ${inv.dateStarted}
                                                    ${inv.status === 'closed' ? ` ‚Ä¢ Finished: ${inv.dateClosed}` : ''}
                                                </p>
                                            </div>
                                        </div>
                                        <span class="px-4 py-2 rounded-full text-sm font-bold shadow-md ${
                                            inv.status === 'active' 
                                                ? 'bg-gradient-to-r from-green-400 to-green-500 text-white' 
                                                : 'bg-gray-200 text-gray-700'
                                        }">
                                            ${inv.status === 'active' ? '‚ú® Active' : '‚úÖ Closed'}
                                        </span>
                                    </div>

                                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                                        <div class="bg-white p-3 rounded-xl shadow-sm">
                                            <p class="text-xs text-gray-500 font-semibold">üí∞ Started with</p>
                                            <p class="font-bold text-lg text-gray-800">CHF ${inv.amountInvested.toFixed(2)}</p>
                                        </div>
                                        <div class="bg-white p-3 rounded-xl shadow-sm">
                                            <p class="text-xs text-gray-500 font-semibold">üíé Worth Now</p>
                                            <p class="font-bold text-lg text-blue-600">CHF ${currentValue.toFixed(2)}</p>
                                        </div>
                                        <div class="bg-white p-3 rounded-xl shadow-sm">
                                            <p class="text-xs text-gray-500 font-semibold">${gain >= 0 ? 'üìà Profit' : 'üìâ Loss'}</p>
                                            <p class="font-bold text-lg ${gain >= 0 ? 'text-green-600' : 'text-red-600'}">
                                                ${gain >= 0 ? '+' : ''}CHF ${gain.toFixed(2)}
                                            </p>
                                        </div>
                                        <div class="bg-white p-3 rounded-xl shadow-sm">
                                            <p class="text-xs text-gray-500 font-semibold">‚ö° ROI</p>
                                            <p class="font-bold text-lg ${roi >= 0 ? 'text-green-600' : 'text-red-600'}">
                                                ${roi >= 0 ? 'üòä +' : 'üò¢ '}${roi.toFixed(1)}%
                                            </p>
                                        </div>
                                    </div>

                                    ${inv.valueHistory.length > 1 ? `
                                        <div class="mb-4">
                                            <p class="text-sm text-gray-600 mb-2 font-bold flex items-center gap-2">
                                                üìÖ üìä History:
                                            </p>
                                            <div class="flex flex-wrap gap-2">
                                                ${inv.valueHistory.map(vh => `
                                                    <div class="bg-purple-100 px-3 py-2 rounded-xl text-sm font-medium shadow-sm">
                                                        ${vh.date}: CHF ${vh.value.toFixed(2)}
                                                    </div>
                                                `).join('')}
                                            </div>
                                        </div>
                                    ` : ''}

                                    ${inv.status === 'active' ? `
                                        ${isEditing ? `
                                            <div class="flex gap-2 items-center" id="edit-form-${inv.id}">
                                                <input
                                                    type="number"
                                                    step="0.01"
                                                    placeholder="New value"
                                                    id="update-value-${inv.id}"
                                                    class="flex-1 px-4 py-2 border-2 border-purple-300 rounded-xl font-medium"
                                                />
                                                <input
                                                    type="date"
                                                    id="update-date-${inv.id}"
                                                    value="${new Date().toISOString().split('T')[0]}"
                                                    class="px-4 py-2 border-2 border-purple-300 rounded-xl font-medium"
                                                />
                                                <button
                                                    onclick="updateInvestmentValue('${inv.id}', document.getElementById('update-value-${inv.id}').value, document.getElementById('update-date-${inv.id}').value)"
                                                    class="bg-green-500 text-white px-4 py-2 rounded-xl hover:bg-green-600 font-bold shadow-md"
                                                >
                                                    ‚úì
                                                </button>
                                                <button
                                                    onclick="state.editingInvestment = null; render();"
                                                    class="bg-gray-300 text-gray-700 px-4 py-2 rounded-xl hover:bg-gray-400 font-bold shadow-md"
                                                >
                                                    ‚úï
                                                </button>
                                            </div>
                                        ` : `
                                            <div class="flex gap-3">
                                                <button
                                                    onclick="state.editingInvestment = '${inv.id}'; render();"
                                                    class="flex items-center gap-2 bg-blue-500 text-white px-4 py-2 rounded-xl font-bold hover:bg-blue-600 shadow-md hover-scale transition-all"
                                                >
                                                    ‚úèÔ∏è Update Value
                                                </button>
                                                <button
                                                    onclick="closeInvestment('${inv.id}')"
                                                    class="flex items-center gap-2 bg-purple-500 text-white px-4 py-2 rounded-xl font-bold hover:bg-purple-600 shadow-md hover-scale transition-all"
                                                >
                                                    üí∞ Finish & Get Money
                                                </button>
                                            </div>
                                        `}
                                    ` : ''}
                                </div>
                            `;
                        }).join('') : `
                            <div class="text-center py-16 bg-gradient-to-br from-blue-50 to-green-50 rounded-2xl border-2 border-dashed border-blue-200">
                                <div class="text-8xl mb-4">üìà</div>
                                <p class="text-blue-400 text-xl font-bold mb-2">No investments yet!</p>
                                <p class="text-blue-300 text-lg">Create your first investment to start growing your money! üå±‚ú®</p>
                            </div>
                        `}
                    </div>
                </div>
            `;
        }

        // Main render function
        function render() {
            const totalValue = calculateTotalValue();
            const activeInvestmentsValue = state.investments
                .filter(inv => inv.status === 'active')
                .reduce((sum, inv) => sum + inv.valueHistory[inv.valueHistory.length - 1].value, 0);

            const today = new Date().toISOString().split('T')[0];

            document.getElementById('root').innerHTML = `
                <div class="min-h-screen bg-gradient-to-br from-pink-200 via-purple-200 to-blue-200 p-4">
                    <div class="max-w-6xl mx-auto">
                        <!-- Decorative coins -->
                        <div class="fixed top-4 right-4 opacity-50">
                            <div class="coin" style="width: 3rem; height: 3rem; font-size: 0.875rem;">CHF</div>
                        </div>
                        <div class="fixed bottom-4 left-4 opacity-50">
                            <div class="coin animate-bounce" style="width: 2.5rem; height: 2.5rem; animation-delay: 0.5s;">CHF</div>
                        </div>
                        <div class="fixed top-20 left-10 opacity-30">
                            <div class="coin animate-bounce" style="width: 1.5rem; height: 1.5rem; font-size: 0.625rem; animation-delay: 1s;">CHF</div>
                        </div>
                        
                        <!-- Header -->
                        <div class="bg-white rounded-3xl shadow-2xl p-6 mb-6 border-4 border-purple-300">
                            <div class="flex items-center justify-between mb-6">
                                <div class="flex items-center gap-4">
                                    <div class="relative">
                                        <div class="text-7xl">üê∑</div>
                                        <div class="absolute -top-1 -right-1 text-3xl">‚ú®</div>
                                    </div>
                                    <div>
                                        <h1 class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-600">
                                            My Money Adventure! üéâ
                                        </h1>
                                        <p class="text-purple-600 font-medium">Learn to save and invest!</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Overview Cards -->
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="bg-gradient-to-br from-pink-400 to-pink-500 rounded-2xl p-6 text-white shadow-lg hover-scale transition-all">
                                    <div class="flex items-center justify-between mb-3">
                                        <span class="text-pink-100 font-semibold text-lg">üí∞ Total Money</span>
                                        <span class="text-3xl">‚≠ê</span>
                                    </div>
                                    <p class="text-4xl font-bold mb-2">CHF ${totalValue.toFixed(2)}</p>
                                    <div class="flex gap-1">
                                        <div class="coin" style="width: 1rem; height: 1rem; font-size: 0.5rem;">CHF</div>
                                        <div class="coin animate-bounce" style="width: 1rem; height: 1rem; font-size: 0.5rem; animation-delay: 0.2s;">CHF</div>
                                        <div class="coin animate-bounce" style="width: 1rem; height: 1rem; font-size: 0.5rem; animation-delay: 0.4s;">CHF</div>
                                    </div>
                                </div>
                                
                                <div class="bg-gradient-to-br from-purple-400 to-purple-500 rounded-2xl p-6 text-white shadow-lg hover-scale transition-all">
                                    <div class="flex items-center justify-between mb-3">
                                        <span class="text-purple-100 font-semibold text-lg">üê∑ Piggy Bank</span>
                                        <span class="text-3xl">üê∑</span>
                                    </div>
                                    <p class="text-4xl font-bold mb-2">CHF ${state.piggyBank.toFixed(2)}</p>
                                    <p class="text-purple-100 text-sm">Ready to spend or invest!</p>
                                </div>
                                
                                <div class="bg-gradient-to-br from-blue-400 to-blue-500 rounded-2xl p-6 text-white shadow-lg hover-scale transition-all">
                                    <div class="flex items-center justify-between mb-3">
                                        <span class="text-blue-100 font-semibold text-lg">üìà Investments</span>
                                        <span class="text-3xl">üìà</span>
                                    </div>
                                    <p class="text-4xl font-bold mb-2">CHF ${activeInvestmentsValue.toFixed(2)}</p>
                                    <p class="text-blue-100 text-sm">Growing your money!</p>
                                </div>
                            </div>
                        </div>

                        <!-- Tabs -->
                        <div class="bg-white rounded-3xl shadow-2xl mb-6 border-4 border-purple-300">
                            <div class="border-b-4 border-purple-200">
                                <div class="flex">
                                    <button
                                        onclick="changeTab('overview')"
                                        class="px-6 py-4 font-bold capitalize text-lg transition-all ${
                                            state.activeTab === 'overview'
                                                ? 'border-b-4 border-pink-500 text-pink-600 bg-pink-50'
                                                : 'text-gray-500 hover:text-gray-700 hover:bg-gray-50'
                                        }"
                                    >
                                        üè† overview
                                    </button>
                                    <button
                                        onclick="changeTab('transactions')"
                                        class="px-6 py-4 font-bold capitalize text-lg transition-all ${
                                            state.activeTab === 'transactions'
                                                ? 'border-b-4 border-pink-500 text-pink-600 bg-pink-50'
                                                : 'text-gray-500 hover:text-gray-700 hover:bg-gray-50'
                                        }"
                                    >
                                        üí∏ transactions
                                    </button>
                                    <button
                                        onclick="changeTab('investments')"
                                        class="px-6 py-4 font-bold capitalize text-lg transition-all ${
                                            state.activeTab === 'investments'
                                                ? 'border-b-4 border-pink-500 text-pink-600 bg-pink-50'
                                                : 'text-gray-500 hover:text-gray-700 hover:bg-gray-50'
                                        }"
                                    >
                                        üå± investments
                                    </button>
                                </div>
                            </div>

                            <div class="p-6">
                                ${state.activeTab === 'overview' ? renderOverviewTab() : ''}
                                ${state.activeTab === 'transactions' ? renderTransactionsTab() : ''}
                                ${state.activeTab === 'investments' ? renderInvestmentsTab() : ''}
                            </div>
                        </div>
                    </div>

                    <!-- Transaction Modal -->
                    <div id="transactionModal" class="modal">
                        <div class="bg-gradient-to-br from-pink-50 to-purple-50 rounded-3xl p-8 max-w-md w-full border-4 border-pink-300 shadow-2xl">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-2xl font-bold text-purple-600 flex items-center gap-2">
                                    <span class="text-3xl">üê∑</span> üí∞ Add/Take Money
                                </h3>
                                <button
                                    onclick="closeModal('transactionModal')"
                                    class="text-gray-400 hover:text-gray-600 bg-white rounded-full p-2"
                                >
                                    <span class="text-2xl">‚úï</span>
                                </button>
                            </div>
                            
                            <form onsubmit="addTransaction(event)" class="space-y-5">
                                <div>
                                    <label class="block text-sm font-bold text-gray-700 mb-2 flex items-center gap-2">
                                        <span class="text-lg">üéØ</span> What are you doing?
                                    </label>
                                    <select
                                        name="type"
                                        class="w-full px-4 py-3 border-2 border-purple-300 rounded-2xl font-medium text-lg"
                                    >
                                        <option value="deposit">üíµ Adding Money (Deposit)</option>
                                        <option value="withdrawal">üè™ Taking Out Money (Withdrawal)</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-bold text-gray-700 mb-2 flex items-center gap-2">
                                        <span class="text-lg">üí∞</span> How much? (CHF)
                                    </label>
                                    <input
                                        type="number"
                                        step="0.01"
                                        name="amount"
                                        class="w-full px-4 py-3 border-2 border-purple-300 rounded-2xl font-medium text-lg"
                                        required
                                        placeholder="0.00"
                                    />
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-bold text-gray-700 mb-2 flex items-center gap-2">
                                        <span class="text-lg">üìù</span> What's it for?
                                    </label>
                                    <input
                                        type="text"
                                        name="description"
                                        placeholder="e.g., Allowance from Mom & Dad"
                                        class="w-full px-4 py-3 border-2 border-purple-300 rounded-2xl font-medium"
                                        required
                                    />
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-bold text-gray-700 mb-2 flex items-center gap-2">
                                        <span class="text-lg">üìÖ</span> What day?
                                    </label>
                                    <input
                                        type="date"
                                        name="date"
                                        value="${today}"
                                        class="w-full px-4 py-3 border-2 border-purple-300 rounded-2xl font-medium"
                                        required
                                    />
                                </div>
                                
                                <div class="flex gap-3 pt-2">
                                    <button
                                        type="submit"
                                        class="flex-1 bg-gradient-to-r from-pink-500 to-purple-500 text-white py-4 rounded-2xl hover:from-pink-600 hover:to-purple-600 font-bold text-lg shadow-lg hover-scale transition-all"
                                    >
                                        ‚ú® Save
                                    </button>
                                    <button
                                        type="button"
                                        onclick="closeModal('transactionModal')"
                                        class="px-6 bg-gray-200 text-gray-700 py-4 rounded-2xl hover:bg-gray-300 font-bold text-lg"
                                    >
                                        Cancel
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Investment Modal -->
                    <div id="investmentModal" class="modal">
                        <div class="bg-gradient-to-br from-blue-50 to-green-50 rounded-3xl p-8 max-w-md w-full border-4 border-blue-300 shadow-2xl">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-2xl font-bold text-blue-600 flex items-center gap-2">
                                    <span class="text-3xl">üìà</span> üå± New Investment
                                </h3>
                                <button
                                    onclick="closeModal('investmentModal')"
                                    class="text-gray-400 hover:text-gray-600 bg-white rounded-full p-2"
                                >
                                    <span class="text-2xl">‚úï</span>
                                </button>
                            </div>
                            
                            <form onsubmit="createInvestment(event)" class="space-y-5">
                                <div>
                                    <label class="block text-sm font-bold text-gray-700 mb-2 flex items-center gap-2">
                                        <span class="text-lg">üìà</span> What's your investment called?
                                    </label>
                                    <input
                                        type="text"
                                        name="name"
                                        placeholder="e.g., Lemonade Stand, Magic Seeds"
                                        class="w-full px-4 py-3 border-2 border-blue-300 rounded-2xl font-medium"
                                        required
                                    />
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-bold text-gray-700 mb-2 flex items-center gap-2">
                                        <span class="text-lg">üí∞</span> How much to invest? (CHF)
                                    </label>
                                    <input
                                        type="number"
                                        step="0.01"
                                        name="amount"
                                        class="w-full px-4 py-3 border-2 border-blue-300 rounded-2xl font-medium text-lg"
                                        required
                                        placeholder="0.00"
                                    />
                                    <div class="mt-2 p-3 bg-yellow-50 rounded-xl border-2 border-yellow-200">
                                        <p class="text-sm font-bold text-yellow-800 flex items-center gap-2">
                                            <span class="text-2xl">üê∑</span>
                                            You have CHF ${state.piggyBank.toFixed(2)} in your piggy bank! üê∑
                                        </p>
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-bold text-gray-700 mb-2 flex items-center gap-2">
                                        <span class="text-lg">üìÖ</span> When did you start?
                                    </label>
                                    <input
                                        type="date"
                                        name="date"
                                        value="${today}"
                                        class="w-full px-4 py-3 border-2 border-blue-300 rounded-2xl font-medium"
                                        required
                                    />
                                </div>
                                
                                <div class="flex gap-3 pt-2">
                                    <button
                                        type="submit"
                                        class="flex-1 bg-gradient-to-r from-blue-500 to-green-500 text-white py-4 rounded-2xl hover:from-blue-600 hover:to-green-600 font-bold text-lg shadow-lg hover-scale transition-all"
                                    >
                                        üöÄ Start Growing!
                                    </button>
                                    <button
                                        type="button"
                                        onclick="closeModal('investmentModal')"
                                        class="px-6 bg-gray-200 text-gray-700 py-4 rounded-2xl hover:bg-gray-300 font-bold text-lg"
                                    >
                                        Cancel
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            `;
        }

        // Initialize app
        window.addEventListener('DOMContentLoaded', () => {
            loadData();
            render();
        });
    </script>
</body>
</html>